<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kt.mapper.GisMapper">

	<!-- 게시글 list -->
	<select id="selectList" resultType="com.kt.vo.GisVO">
	<!-- VO랑 변수명 맞춰야함 -->
	<![CDATA[
		SELECT
			  NAME
			 ,AGE
		 FROM GISTAR.TEST
	]]>
	</select>

	<!-- 선택된 구에 해당하는 상권 정보 가져오기  -->
	<select id="getSangList" parameterType="com.kt.vo.SangVO" resultType="com.kt.vo.SangVO">
	<!-- VO랑 변수명 맞춰야함 -->
	<![CDATA[
		 SELECT
			 tra_nm
			,sgg_cd
			,sgg_nm
			,admdong_nm
			,xcrd::numeric --map함수에 적용될때는 숫자여야하므로 numeric으로 casting
			,ycrd::numeric
		 FROM TRA_XYCRD
		 WHERE  sido_cd = '11'
		   AND  sgg_cd = #{sggCd} --코드 가져오는 방법 찾는중
		 LIMIT 20
	]]>
	</select>
	
	<!-- 서울시 구 정보 가져오기 -->
	<select id="getSeoulList" resultType="com.kt.vo.SangVO">
	<!-- VO랑 변수명 맞춰야함 -->
	<!-- VO는 언더바 빼야함-->
	<![CDATA[
		SELECT
			  SGG_CD
			  ,SGG_NM
		  FROM COMCD
	]]>
	</select>
	
	<!-- 서울시 종로구 경계영역 가져오기 -->
	<select id="getSeoulGeom" parameterType="com.kt.vo.guVO" resultType="com.kt.vo.guVO">
	<!-- VO랑 변수명 맞춰야함 -->
	<!-- VO는 언더바 빼야함-->
	<![CDATA[
		SELECT   sig_cd
				,xcrd
				,ycrd
		FROM sig_jongro
		WHERE sig_cd = #{sigCd}
		
	]]>
	</select>


	<!-- 선택된 구의 동정보 경계영역 가져오기 -->
	<select id="getEmdGeom" parameterType="com.kt.vo.guVO" resultType="com.kt.vo.EmdVO">
	<!-- VO랑 변수명 맞춰야함 -->
	<!-- VO는 언더바 빼야함-->
	<![CDATA[
		SELECT   emd_cd
				,emd_kor_nm
				,xcrd
				,ycrd
		FROM emd_xycrd
		WHERE emd_cd like concat(#{sigCd},'%')
		
	]]>
	</select>
</mapper>